<?xml version="1.0" encoding="UTF-8"?>
<component type="desktop-application">
  <id>io.github.mirakuna.mirage</id>
  <name>Mirage</name>
  <summary>Customizable and keyboard-operable Matrix client</summary>
  <description>
    <p>A fancy, customizable, keyboard-operable Qt/QML and Python Matrix chat client for encrypted and decentralized communication.</p>
  </description>
  <categories>
    <category>Network</category>
    <category>Chat</category>
    <category>InstantMessaging</category>
    <category>Qt</category>
  </categories>
  <content_rating type="oars-1.1">
    <content_attribute id="social-chat">intense</content_attribute>
    <content_attribute id="social-audio">intense</content_attribute>
  </content_rating>
  <url type="homepage">https://github.com/mirukana/mirage</url>
  <url type="bugtracker">https://github.com/mirukana/mirage/issues</url>
  <launchable desktop-id="io.github.mirukana.mirage"></launchable>
  <provides>
    <binary>mirage</binary>
  </provides>
  <project_license>LGPL-3.0-or-later</project_license>
  <screenshots>
    <screenshot type="default">
      <caption>Chatting with Mirage</caption>
      <image>https://raw.githubusercontent.com/mirukana/mirage/master/docs/screenshots/01-chat.png</image>
    </screenshot>
    <screenshot>
      <caption>Login screen</caption>
      <image>https://raw.githubusercontent.com/mirukana/mirage/master/docs/screenshots/02-sign-in.png</image>
    </screenshot>
    <screenshot>
      <caption>Account settings</caption>
      <image>https://raw.githubusercontent.com/mirukana/mirage/master/docs/screenshots/03-account-settings.png</image>
    </screenshot>
    <screenshot>
      <caption>Creating a room</caption>
      <image>https://raw.githubusercontent.com/mirukana/mirage/master/docs/screenshots/04-create-room.png</image>
    </screenshot>
    <screenshot>
      <caption>Conversation list on a narrow screen</caption>
      <image>https://raw.githubusercontent.com/mirukana/mirage/master/docs/screenshots/05-main-pane-small.png</image>
    </screenshot>
    <screenshot>
      <caption>Chatting on a narrow screen</caption>
      <image>https://raw.githubusercontent.com/mirukana/mirage/master/docs/screenshots/06-chat-small.png</image>
    </screenshot>
    <screenshot>
      <caption>Viewing the list of rooms on a narrow screen</caption>
      <image>https://raw.githubusercontent.com/mirukana/mirage/master/docs/screenshots/07-room-pane-small.png</image>
    </screenshot>
  </screenshots>
  <metadata_license>FSFAP</metadata_license>
  <releases>
    <release version="0.7.1" date="2021-03-04">
<h3>Fixed</h3>
<ul>
<li>Fix loading custom themes when compiled in release mode </li>
<li>Fix homeserver list errors with aiohttp 3.6.x and less, used in Flatpak</li>
<li>Various corrections to default config file comments</li>
</ul>
</release>
<release version="0.7.0" date="2021-02-28">
<h3>Added</h3>
<ul>
<li><p><strong>Push rules and notifications support</strong>:</p>
<ul>
<li>Add native desktop notifications support</li>
<li>Add sound effect playback support </li>
<li>Add button and keybinds to mute all notifications in the running client</li>
<li>Add notification context menu options to rooms in the left pane </li>
<li><p>Add a push rule editor to account settings:</p>
<ul>
<li><p>Control for any rule whether matching messages are
marked as unread, highlighted, trigger a desktop notification,
sound, window alert, or any combination of those actions</p>
</li>
<li><p>Create custom rules targeting a particular room, message sender,
messages containing certain words or messages matching
advanced conditions</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>New configuration system</strong> replacing the previous <code>settings.json</code>,
see the
<a href="https://github.com/mirukana/mirage/blob/master/docs/CONFIG.md">documentation</a>
for more info</p>
</li>
<li><p>Rooms in the left pane can now be pinned to the top of the list, using the
added context menu option or config file setting</p>
</li>
<li><p>Support drag-and-dropping text and files to upload in chats</p>
</li>
<li><p>Add tooltips to the message read counters, listing who has read a message and
when. Tooltips can also be shown for the keyboard-focused message using a
keybind.</p>
</li>
<li><p>The chat header now indicates when messages are selected in the timeline,
and offers copy/redact/clear selection buttons</p>
</li>
<li><p>Add a visible indicator when downloading files</p>
</li>
<li><p>Add command-line arguments parsing and a <code>--start-in-tray</code> option, see
<code>mirage --help</code></p>
</li>
<li><p>Support for HTTP and SOCKS5 proxies, can be set in config file or using the
<code>http_proxy</code> environment variable</p>
</li>
<li><p>Hovering on stability percentages in the sign-in page's homeserver list
now shows more detailed tooltips about the server's recent downtimes</p>
</li>
</ul>
<h3>Changed</h3>
<ul>
<li><p>Config files and theme (with the exception of <code>accounts.json</code>) are now
automatically reloaded when changed on disk</p>
</li>
<li><p>The top-left settings button now opens a menu giving access to the
settings folder, theme folder and developer console</p>
</li>
<li><p>Clicking on the "Mirage x.y.z" text in the top left no longer opens the
github page</p>
</li>
<li><p>Merge the "Encryption" and "Sessions" account settings tabs into a new
"Security" tab</p>
</li>
<li><p>Developer console improvements:</p>
<ul>
<li>Improve default colors and provide clearer separation of different
commands's outputs</li>
<li>Support multi-line input, use shift+return to insert a newline</li>
<li>The output text can now be selected and copied</li>
</ul>
</li>
<li><p>Improve room page loading speed</p>
</li>
<li><p>In the left pane, lock the position of the room corresponding to the
currently visible chat page if any.<br>
This fixes annoyances like clicking on a room with unread messages only to
see it immediatly fly down the list, potentially outside of scrolling view.</p>
</li>
<li><p>When replying to a message, pressing the reply keybind again while focusing
on that message will now cancel the reply</p>
</li>
<li><p>Make user ID in account settings a copiable read-only text field</p>
</li>
<li><p>Hide useless context menu entries for read-only text fields (undo/paste/etc)</p>
</li>
<li><p>Make the scroll to top/bottom keybinds work faster for long timelines and
be more accurate</p>
</li>
<li><p>Better explain why not all selected messages can be removed in the
message removal confirmation popup</p>
</li>
<li><p>When clicking on an account in the top left account bar or using the
previous/next account keybinds, focus the account settings instead of
the account's first room</p>
</li>
<li><p>While keyboard-focusing an image message, hide its sender and time bubbles
as if it was hovered by mouse</p>
</li>
<li><p>Color key words in invite/leave/forget/error popups instead of using italic</p>
</li>
<li><p>Apply theme radius on context menus</p>
</li>
<li><p>Theming:</p>
<ul>
<li>Reduce default <code>fontSize.big</code> from <code>22</code> to <code>20</code></li>
<li>Change the default style of room unread indicators</li>
<li>Add new properties to the <code>mainPane.accountBar.account.unreadIndicator</code>
and <code>mainPane.listView.room.unreadIndicator</code> sections, see
<a href="https://github.com/mirukana/mirage/commit/620b58151d7d9d15e242402da34ef55a05549ca5#diff-fdb828d814eca61316a31204666263a410da6dd9c1cf0099dbf54da9e82e33e1">620b5815</a></li>
</ul>
</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Fix build failing on Python 3.9 due to incompatible <code>blist</code> dependency</p>
</li>
<li><p>Fix event context menu "Reply" option targetting the wrong message</p>
</li>
<li><p>Fix read counter on image events lacking color and having extra padding</p>
</li>
<li><p>Prevent opening multiple instances of the same context menu by right clicking
or using keybinds</p>
</li>
<li><p>Fix current page not being highlighted in the left pane when Mirage starts
and the initial page to load is an account settings page</p>
</li>
<li><p>Fix list delegates (especially left pane rooms) occasionally appearing as
invisible items</p>
</li>
<li><p>Fix incorrect user ID text hue in account settings</p>
</li>
<li><p>Close the reply bar when switching to another room while composing a reply</p>
</li>
<li><p>Fix "Copy link address" entry in message context menu not being visible</p>
</li>
<li><p>Fix some characters being rendered incorrectly in redacted messages reasons
(e.g. <code>&lt;test&gt;</code> was shown as <code>&amp;lt;test&amp;gt;</code>)</p>
</li>
<li><p>Fix cancel button in the "Join Room" page not returning to previous page</p>
</li>
<li><p>Fix Matrix server errors lacking a <code>M_CODE</code> triggering an account logout</p>
</li>
<li><p>Fix "Go to previous/next unread/highlighted room" keybinds ignoring rooms
with a local unread counter ([!] markers)</p>
</li>
<li><p>Fix copying multi-line mouse-selected rich text, newlines were not preserved</p>
</li>
<li><p>Prevent warnings spam when the XScreenSaver protocol is available but not
supported, e.g. when running in XWayland</p>
</li>
<li><p>Fix message timeline occasionally breaking and mixing messages from multiple
rooms when switching room</p>
</li>
<li><p>Show an error when loading a JSON config file fails instead of silently
failing and using a default configuration, which can potentially overwrite
user files</p>
</li>
<li><p>Fix "focus previous/next message" keybinds sometimes skipping messages and
focusing the middle of the screen while the timeline scrolling
was at the bottom</p>
</li>
<li><p>Fix read marker updates sometimes getting stuck and never clearing the unread
message counts for a room</p>
</li>
<li><p>Fix scroll keybinds not working when kinetic scrolling is disabled</p>
</li>
<li><p>Fix chat right pane having an invisible 10px edge when hidden/collapsed,
interfering with any button in the way</p>
</li>
<li><p>Fix the "expand right pane" button failing to bring back the pane and
turning the chat room header invisible</p>
</li>
<li><p>Fix "open debug console for this message" keybind erroring</p>
</li>
<li><p>Prevent horizontal dragging of flickable column layout pages</p>
</li>
<li><p>Fix scrolling keybinds not working to scroll popups</p>
</li>
<li><p>Revert 0.6.2's message combining fix, which caused message bubble movements
to randomly stop in the middle of their animations and be left at odd
positions or overlap with other bubbles</p>
</li>
</ul>
<h3>Known Issues</h3>
<ul>
<li><p>Flatpak does not seem to support direct ALSA access, sound notifications
might not work within it</p>
</li>
<li><p>Desktop notifications within Flatpak might not work out of the box when
Xorg is launched without a display manager, try running
<code>export $(dbus-launch --autolaunch "$(cat /var/lib/dbus/machine-id)")</code>
before launching Mirage in a terminal.</p>
</li>
</ul>
</release>
<release version="0.6.4" date="2020-09-16">
<h3>Fixed</h3>
<ul>
<li><p>Fix checkboxes in the room settings not having their default values updated
after switching room</p>
</li>
<li><p>Fix various minor features broken on Qt 5.12 and the AppImage since v0.5.2</p>
</li>
</ul>
</release>
<release version="0.6.3" date="2020-09-16">
<h3>Added</h3>
<ul>
<li><p>Add a <strong>system tray icon</strong>.<br>
A left click will bring up the Mirage window,
middle will quit the application and right will show a menu with these
options.</p>
</li>
<li><p>Add a <code>closeMimizesToTray</code> setting to the config file, defaults to <code>false</code>.<br>
Controls whether closing the Mirage window will leave it running in the
system tray, or fully quit the application.</p>
</li>
<li><p>Add a discrete <strong>read marker indicator</strong> to messages, shows how many people
have this event as their last seen one in the room.<br>
A way to see who read the message and when will be added in the future.</p>
</li>
<li><p>Themes: add <code>chat.message.localEcho</code> and <code>chat.message.readCounter</code> color
properties</p>
</li>
<li><p>Add a <code>zoom</code> setting, defaults to <code>1.0</code></p>
</li>
<li><p>Add a <code>lexicalRoomSorting</code> setting, to sort rooms by their name instead of
recent activity.<br>
A restart is needed to apply changes to this setting.</p>
</li>
</ul>
<h3>Changed</h3>
<ul>
<li><p>Restrict Mirage to a single instance per config folder, trying to launch a
new window will instead focus the existing one.<br>
The <code>MIRAGE_CONFIG_DIR</code> and <code>MIRAGE_DATA_DIR</code> environment variables can be
set to run different "profiles" in parallel.</p>
</li>
<li><p>Reduce the visible lag when opening a chat page, switching rooms should be
a lot smoother</p>
</li>
<li><p>When using the <code>focusPreviousMessage</code> and <code>focusNextMessage</code> keybinds, if no
message is focused and the timeline has been scrolled up,
focus the message in the center of the view instead of returning to the
bottom of the timeline and focusing the last one.</p>
</li>
<li><p>Don't re-center the room list on clicks by default.<br>
This prevents the list from jumping around every time a room is selected.<br>
The previous behavior can be restored with the new <code>centerRoomListOnClick</code>
setting.</p>
</li>
<li><p>Show a better terminal error message than "Component is not ready" when the
window creation fails, giving details on what went wrong in the code</p>
</li>
<li><p>If an account's access token is invalid (e.g. our session was signed out
externally), say so with a popup and cleanly remove it from the UI,
instead of spamming the user with errors.</p>
</li>
<li><p>Rename message context menu option "Debug this event" to just "Debug"</p>
</li>
<li><p>Unify up/down and (shift+)Tab navigation for the account Sessions page</p>
</li>
<li><p>Changes to the UI scale/zoom via keybinds are now persisted across restarts</p>
</li>
<li><p>Themes: <code>uiScale</code> is now bound to <code>window.settings.zoom</code>.<br>
This change is necessary to keep the zoom keybinds working.</p>
</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Midnight theme: fix missing <code>}</code> from change to the <code>chat.message.styleSheet</code>
property introduced in 0.6.2, see
<a href="https://github.com/mirukana/mirage/commit/2a0f6aead17d05fd35e8a944e5434781e9c08d50">2a0f6ae</a>.</p>
</li>
<li><p>Fix multiple consecutive one-line events (/me emotes, "x joined", etc)
not combining properly</p>
</li>
<li><p>Fix theme finder ignoring the <code>MIRAGE_DATA_DIR</code> environment variable</p>
</li>
<li><p>Fix theme background image not updating when reloading theme/settings</p>
</li>
<li><p>Fix up/down keys not working when the text cursor is in a word starting
with <code>@</code>, but the word doesn't match any usernames to complete.</p>
</li>
<li><p>Fix context menu copy options for messages containing URL thumbnails</p>
</li>
<li><p>Fix context menu copy option for single non-message events</p>
</li>
<li><p>Fix GIF URL thumbnails not being animated in the timeline</p>
</li>
<li><p>Fix image viewer sizes shown as "0x0" for loading images and GIFs</p>
</li>
<li><p>Fix incorrect sync filter usage introduced in 0.6.1, which caused problems
like redaction events never arriving</p>
</li>
<li><p>Fix redacted media messages keeping their thumbnails</p>
</li>
<li><p>Fix terminal warnings when uploading to a non-encrypted room</p>
</li>
<li><p>Fix some cases of undetected power level changes, e.g. a muted user
(level -1) going back to the default (level 0).</p>
</li>
<li><p>Don't show popup for <code>400 M_UNRECOGNIZED</code> errors that can occur when trying
to fetch an offline user's presence</p>
</li>
<li><p>Focus the filter field again when exiting a room member profile page</p>
</li>
</ul>
</release>
<release version="0.6.2" date="2020-08-28">
<h3>Changed</h3>
<ul>
<li><p>When replying to a message, you can now press enter without entering any
text to send it directly (useful to "forward" a message).</p>
</li>
<li><p>Sending a file while replying to a message will create a pseudo-reply,
consisting of an "In reply to" text message with no body, followed by the
actual file event.
This is a workaround to the reply restrictions imposed by the Matrix spec.</p>
</li>
<li><p><strong>Composer aliases cannot contain whitespace anymore.</strong>
This includes spaces, hard tabs or newline characters.
If an alias from your config still has whitespace, only the first word
will be taken into account (ignoring any leading or trailing space).</p>
</li>
<li><p>Faster server browser loading, now gathers all needed data with a
single request instead of one for each server</p>
</li>
<li><p>Auto-focus the "Join" button on invited room pages
((Shift+)Tab can be used to navigate between buttons)</p>
</li>
<li><p>Auto-focus the "Forget" button on left room pages</p>
</li>
<li><p>Themes: modify <code>chat.message.styleSheet</code> to add some spacing between HTML
list items, see
<a href="https://github.com/mirukana/mirage/commit/48663ae8465e90646855435b47b89c01395ae4d9">48663ae</a></p>
</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Fix @username autocompletion closing if there's more than one character
after the @</p>
</li>
<li><p>Consider the partial text from IME (input method editors) and touch screen
autocompleting keyboards for username autocompletion</p>
</li>
<li><p>Reset IME state upon autocompleting a username</p>
</li>
<li><p>Fix clicking on autocompletion list user not making the username a mention</p>
</li>
<li><p>Fix UI freezing when mentioning user lacking a display name</p>
</li>
<li><p>Fix mentioning users with blank display name (e.g. only spaces), mention
them by their user ID</p>
</li>
<li><p>Fix text fields/areas unable to be focused on touch screen</p>
</li>
<li><p>Fix random chance of profile retrieval requests failing if one of the logged
in account doesn't federate with other servers (e.g. localhost synapse)</p>
</li>
<li><p>Fix composer text saved to disk for the wrong account if that text begins
by an account alias</p>
</li>
<li><p>Servers can potentially return an outdated member list for rooms on initial
sync, which is one of the possible cause of "Members not synced" error for
encrypted rooms.<br>
When loading the full room list, discard members from the initial sync list
that are absent from the full list.
For those not using the AppImage or Flatpak,
this fix requires <strong>matrix-nio 0.15.1</strong> or later to take effect.</p>
</li>
<li><p>When erasing an account alias inside the composer, send a
"x isn't typing anymore" notification corresponding to that account</p>
</li>
<li><p>Fix potential 403 error on chat pages for invited rooms.</p>
</li>
<li><p>Start loading room history immediately when the room join state changes,
e.g. when clicked "Join" for an invited room page.</p>
</li>
</ul>
</release>
<release version="0.6.1" date="2020-08-21">
<h3>Added</h3>
<ul>
<li><p><strong>SSO authentication</strong> support</p>
</li>
<li><p><strong>Homeserver browser</strong>:</p>
<ul>
<li><p>To add a new account, you will be asked first to pick one of the
listed public server
(list data from <a href="https://publiclist.anchel.nl/">anchel.nl</a>)
or to manually enter a server address</p>
</li>
<li><p>Typing in the server address field will also filter the public server list,
Up/Down or (Shift+)Tab and Enter can be used to navigate it by keyboard</p>
</li>
<li><p>If the address doesn't have a <code>scheme://</code>, auto-detect whether the server
supports HTTPS or only HTTP</p>
</li>
<li><p>Use the .well-known API if possible to resolve domains to the actual
homeserver's URL, e.g. <code>matrix.org</code> resolves to
<code>https://matrix-client.matrix.org</code></p>
</li>
<li><p>The server address field will remember the last homeserver that was
connected to</p>
</li>
</ul>
</li>
<li><p><strong>Room members autocompletion</strong>:</p>
<ul>
<li><p>Type <code>@</code> followed by one or more characters in the composer,
or one or more characters and hit (Shift+)Tab to trigger username/user ID
autocompletion</p>
</li>
<li><p>Only autocompleted names will be turned into mentions, unlike before
where any word in a sent message that happened to be someone's name would
mention them</p>
</li>
</ul>
</li>
<li><p><strong>Full image viewer</strong> for matrix image messages and URL previews:</p>
<ul>
<li><p>Click on a thumbnail in the timeline to open the image viewer</p>
</li>
<li><p>Middle click on a thumbnail (or use the option in the context menu)
to open the image externally</p>
</li>
<li><p>Left click on the image (mouse only): expand to window size if the
image's origin size is smaller than the window,
else expand to original size</p>
</li>
<li><p>Tap on the image (touch screen/pen only): reveal the info and button bars
when auto-hidden (bars will auto-hide only when they overlap with a big
enough displayed image)</p>
</li>
<li><p>Any mouse movement: reveal auto-hidden bars</p>
</li>
<li>Double click on the image: toggle full screen</li>
<li>Middle click anywhere: open externally</li>
<li>Right click anywhere: close the viewer, back to chat</li>
<li>Drag when displayed image is bigger than window to pan</li>
<li>Wheel to pan up/down, hold shift or alt to pan left/right</li>
<li>Ctrl+wheel to control zoom</li>
<li><p>Buttons to control rotation, scale mode, full screen, GIF play/pause
and GIF speed</p>
</li>
<li><p>New keyboard shortcuts are available for all these actions,
see <code>keys.imageViewer</code> in the config file (will be automatically updated
when you start Mirage 0.6.1)</p>
</li>
</ul>
</li>
<li><p>Add <code>media.openExternallyOnClick</code> setting to swap the new
click and middle click on thumbnails behavior</p>
</li>
<li><p>Add <code>openMessagesLinksOrFilesExternally</code> keybind, by default Ctrl+Shift+O</p>
</li>
<li><p>Add <code>copyFilesLocalPath</code> keybind, by default Ctrl+Shift+C</p>
</li>
<li><p>Room and member filter fields now support (Shift+)Tab navigation, in addition
to Up/Down</p>
</li>
<li><p>Add a colored left border to the currently highlighted item in list views
(e.g. room list, members list, etc) to improve visibility</p>
</li>
<li><p>Themes:</p>
<ul>
<li>Add <code>controls.listView.highlightBorder</code> and
<code>controls.listView.highlightBorderThickness</code> properties (can be set to <code>0</code>)</li>
<li>Add the <code>chat.userAutoCompletion</code> section</li>
</ul>
</li>
</ul>
<h3>Changed</h3>
<ul>
<li><p>Messages context menu:</p>
<ul>
<li><p>Use a cleaner icon for the "Copy text" entry</p>
</li>
<li><p>Replace the confusing broken "Copy media address" entry with:</p>
<ul>
<li><p>Copy media address: visible for non-encrypted media, always
copies the HTTP URL</p>
</li>
<li><p>Copy local path: always visible for already downloaded media, even if
they were downloaded before mirage was started</p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>The <code>openMessagesLinks</code> keybind (default Ctrl+O) is renamed to
<code>openMessagesLinksOrFiles</code> and can now also open media message files</p>
</li>
<li><p>Using the <code>openMessagesLinksOrFiles</code> keybind on a reply will now ignore the
matrix.to links contained in the "In reply to XYZ" header</p>
</li>
<li><p>Pressing Ctrl+C to copy selected/highlighted non-encrypted media messages
will copy their HTTP URL instead of the filename</p>
</li>
<li><p>Retry downloading image thumbnails if they fail with a 404 or 500+ server
error (uploads sometimes take a few seconds to become available on the
server)</p>
</li>
<li><p>Non-encrypted media messages are now always downloaded on click and opened
with a desktop application (or the image viewer), instead of
being opened in a browser</p>
</li>
<li><p>Compress thumbnails and clipboard images in a separate process, to avoid
blocking every other backend operation while the compression is running</p>
</li>
<li><p>Reduce the level of optimization applied to clipboard images,
the previous setting was too slow for large PNG (10MB+)</p>
</li>
<li><p>Increase applied scrolling velocity when using the
<code>scrollPageUp</code>/<code>scrollPageDown</code> keybinds, now similar to how it was before
Mirage 0.6.0</p>
</li>
<li><p>Don't catch SIGQUIT (Ctrl+\ in terminal) and SIGTERM signals,
exit immediately</p>
</li>
<li><p>Slightly increase the top/bottom padding to the multi-account bar in the
left pane</p>
</li>
<li><p>Dependencies: minimum nio version bumped to 0.15.0</p>
</li>
</ul>
<h3>Removed</h3>
<ul>
<li>Themes: remove unused <code>controls.listView.smallPaneHighlight</code> property</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Don't show account avatar tooltips when the context menu is open</p>
</li>
<li><p>Don't automatically focus member power level control when grayed out</p>
</li>
<li><p>Fix uploading files for servers not telling us their maximum allowed
file size</p>
</li>
<li><p>Fix message context menu "Copy text": when an event was highlighted with
the keyboard, right clicking a message and clicking "Copy text" would always
copy the message that was highlighted instead of the one the user aimed for.</p>
</li>
<li><p>Fix pressing menu key in chat opening both the composer's and the timeline's
context menus</p>
</li>
<li><p>Fix random chance of failure when fetching thumbnails or user profiles and
an account other than the current one is offline</p>
</li>
<li><p>Catch potential 403 errors when fetching presence for offline room members</p>
</li>
<li><p>Fix room right pane stealing focus from opened popup when resizing the window
from narrow/mobile mode to normal mode</p>
</li>
<li><p>Never try to send typing notifications in rooms where we don't have
permission to talk</p>
</li>
<li><p>Fix clipboard upload preview popup not updating when the copied image changes</p>
</li>
<li><p>Fix some pages not respecting <code>enableKineticScrolling: false</code> setting</p>
</li>
<li><p>Fix truncated "Loading previous messag..." text in timeline</p>
</li>
<li><p>Fix possible race condition corrupting user config files on write</p>
</li>
<li><p>Fix missing member events from initial syncs, also fixes some cases
of the "Members not synced" error occurring in encrypted rooms where members
have recently joined or left.</p>
</li>
<li><p>Fetch missing member display name when displaying last messages in room pane
for rooms that haven't had their members list fully loaded yet</p>
</li>
<li><p>Use uploaded sync filter IDs in sync requests instead of passing a long
JSON object in the URL every time, which caused problems on some servers with
a short URL length limit (e.g. halogen.city)</p>
</li>
<li><p>Fix autolinking user IDs that include <code>;</code> or <code>&lt;</code> characters</p>
</li>
<li><p>Ignore enter keypresses in pages or popups when the accept button is grayed
out</p>
</li>
<li><p>Fix never-ending spinner in left pane when logging in to an account that was
already connected</p>
</li>
</ul>
</release>
<release version="0.6.0" date="2020-07-1">
<h3>Added</h3>
<ul>
<li><p><strong>Room member profiles</strong>:</p>
<ul>
<li><p>Can be accessed by clicking on a user in the room's right pane, or focusing
the filter field and navigating with up/down/enter/escape</p>
</li>
<li><p>Includes large avatar, display name, user ID, <strong>presence</strong> info,
<strong>power level control</strong> and <strong>E2E sessions list</strong></p>
</li>
</ul>
</li>
<li><p><strong>E2E Verification</strong>:</p>
<ul>
<li><p>Sessions for room members can now be (manually) verified from
their profile</p>
</li>
<li><p>Sessions for different accounts within the same client will automatically
verify each others based on session keys</p>
</li>
<li><p>Verifying a session will automatically verify it for all connected accounts,
as long as the session keys are identical</p>
</li>
</ul>
</li>
<li><p><strong>Presence</strong>:</p>
<ul>
<li><p>Added presence (online, unavailable, invisible, offline) and status
message control to the accounts context menu in the room list</p>
</li>
<li><p>Added <code>togglePresence{Unavailable,Invisible,Offline}</code> keybinds bound by
default to <code>Ctrl+Alt+{A/U,I,O}</code></p>
</li>
<li><p>Added <code>openPresenceMenu</code> keybind to open the current account's context
menu, <code>Alt+P</code> by default</p>
</li>
<li><p>The room member list is now sorted by power level, then presence, then name</p>
</li>
<li><p>The room member list will display presence orbs and last seen time for
members if the server supports it. Last seen times for offline members
are also automatically retrieved as needed.</p>
</li>
<li><p>Set logged in accounts offline when closing Mirage</p>
</li>
<li><p>Linux/X11 specific: Add auto-away feature configurable by the
<code>beUnavailableAfterSecondsIdle</code> setting (default 600 for 10mn),
can be disabled by setting it to <code>-1</code>.<br>
<strong>This requires the libX11 and libXScrnSaver/libXss developpment headers
installed, see INSTALL.md for more info</strong>.<br>
The dependencies and support for this feature can be disabled at
compile-time.</p>
</li>
</ul>
</li>
<li><p><strong>Session sign out</strong>: you can now sign out your other sessions from the
account settings. This currently only supports password authentification.</p>
</li>
<li><p><strong>Pasting images</strong> via Ctrl+V or composer context menu, shows a preview of
the image before uploading</p>
</li>
<li><p>Added basic keyboard navigation for account settings session list:</p>
<ul>
<li>Up/down: highlight previous/next session</li>
<li>Enter/Return/Menu: open highlighted session menu</li>
<li>Space: check or uncheck highlighted sessions</li>
<li>Escape: uncheck all sessions</li>
<li>Alt+R/F5: refresh list</li>
<li>Alt+S/Delete: sign out checked sessions, or all sessions if none checked</li>
</ul>
</li>
<li><p>Add a verified devices indicator to encrypted room headers</p>
</li>
<li><p>Add experimental support for rendering of inline images and custom emotes in
messages</p>
</li>
<li><p>Add <code>kineticScrollingMaxSpeed</code> and <code>kineticScrollingDeceleration</code> settings</p>
</li>
<li><p>When highlighting accounts, rooms or members in lists
(focus filter field and use up/down), the highlighted item's context menu
can now be accessed with the keyboard Menu key</p>
</li>
<li><p>Support for Menu key when keyboard-navigating messages in the timeline</p>
</li>
<li><p>Add context menus to text field and areas</p>
</li>
<li><p>Add a button to quickly expand the room pane when collapsed and focus
the filter field</p>
</li>
<li><p>Clicking on the current tab button for the room pane now fully hides it,
this can also be toggled with the new <code>toggleHideRoomPane</code> keybind
(default Ctrl+Alt+R)</p>
</li>
<li><p>Themes:</p>
<ul>
<li>Add the <code>controls.presence</code> section</li>
<li>Add <code>mainPane.listView.offlineOpacity</code> property</li>
<li>Add CSS styling for <code>table</code> and <code>td</code> in the <code>chat.message.styleSheet</code>
property</li>
</ul>
</li>
</ul>
<h3>Changed</h3>
<ul>
<li><p>When panes are smaller than their default width due to user resizing or
window size constraints, focusing certain elements will auto-expand them
until the focus is lost: filter fields, member profile and room settings</p>
</li>
<li><p>Reduced the default kinetic scrolling speed, which was hardcoded to an
aggressive <code>4000</code> before.
This can be restored with the <code>kineticScrollingMaxSpeed</code> setting.</p>
</li>
<li><p>Improve key verification popup texts and make the session details copiable</p>
</li>
<li><p>Power levels/room permission change events will now show a line of text or
table containing the details of what exactly changed</p>
</li>
<li><p>Messages containing tables will no longer be width-limited</p>
</li>
<li><p>Using the <code>sendFileFromPathInClipboard</code> keybind (default Alt+Shift+S)
now shows a preview of the file if it's an image and asks for confirmation</p>
</li>
<li><p>Image messages now show spinners when loading the thumbnail</p>
</li>
<li><p>Clicking on a GIF message will now open it externally like other images
instead of pausing it. A dedicated play/pause button is now displayed in
the corner.</p>
</li>
<li><p>Themes:</p>
<ul>
<li><p>Update the <code>colors.positiveBackground</code>, <code>colors.middleBackground</code> and
<code>colors.negativeBackground</code> properties to be brighter and have full opacity</p>
</li>
<li><p>Increase the opacity for the <code>menu.background</code> color (context menu), the
previous value made it very hard to read in certain situations</p>
</li>
</ul>
</li>
</ul>
<h3>Removed</h3>
<ul>
<li>Themes: removed the <code>image</code> section and its <code>maxPauseIndicatorSize</code> property,
no longer used since the GIF changes</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Fix parsing user/room ID and room aliases containing dashes in messages</p>
</li>
<li><p>Fix responding to own messages sending an incorrect event ID to other clients</p>
</li>
<li><p>Fix plain text body of replies sent from Mirage</p>
</li>
<li><p>Fix high CPU usage due to the "Loading messages..." animation still being
rendered when invisible</p>
</li>
<li><p>When logging in to an already connected account, redirect to the account
settings page instead of overwriting it and losing the previous session</p>
</li>
<li><p>Fix signing out of an account leaving all its room in the room list</p>
</li>
<li><p>Fix all keybinds becoming disabled until next restart if a popup or menu
is destroyed instead of being properly closed</p>
</li>
<li><p>Fix pressing left/right arrow to deselect text in fields and areas when the
cursor is positioned at the beginning/end</p>
</li>
<li><p>Fix missing text for events involving display names that contain <code>&lt; &gt;</code>
characters and other dangerous characters interpreted by HTML</p>
</li>
<li><p>Fix sending a typing notice indicating we stopped typing when the composer
is cleared (e.g. when erasing all text or sending a message)</p>
</li>
<li><p>Fix hovering image messages not setting the pointing hand cursor</p>
</li>
<li><p>Opening a context menu and clicking at the exact spot where it was opened
without having moved the cursor will now close the menu instead of doing
nothing</p>
</li>
<li><p>Highlight the correct room list item when adding a new account, going
to account settings or ctrl+tabbing to the "add new chat" page</p>
</li>
<li><p>Fix right room pane being shown as overlay sometimes in small window mode</p>
</li>
<li><p>Fix avatar membership icon (crown/star) position when the room pane is small</p>
</li>
<li><p>Correctly handle SIGINT (ctrl+c in terminal), SIGTERM, SIGHUP and SIGQUIT
to exit Mirage</p>
</li>
<li><p>Fix opacity of topic area in room settings when disabled due to lack of
permission</p>
</li>
<li><p>Fix GIF only having a cropped portion of their content rendered</p>
</li>
<li><p>Hide the "recursive layout" warnings spam in terminal that appeared
in Qt 5.14</p>
</li>
</ul>
</release>
<release version="0.5.2" date="2020-06-26">
<h3>Added</h3>
<ul>
<li><p><strong>Sessions/device list</strong>: you can now inspect, rename, manually verify and
blacklist your devices from the account settings page.
The interface is still work in progress, keyboard navigation and signing
out sessions will be added in a next version.</p>
</li>
<li><p>Re-add client-side unread/highlight room indicators.
If your account has push notifications disabled, which precise cross-client
counters depend on, the local indicators will be used as fallback.</p>
</li>
<li><p>Support the <code>MIRAGE_CACHE_DIR</code> environment variable to override where
files and thumbnails are downloaded</p>
</li>
<li><p>Themes:</p>
<ul>
<li><code>colors.positiveText</code> property</li>
<li><code>mainPane.listView.room.unreadName</code> property</li>
<li>In the <code>controls</code> section:<ul>
<li><code>scrollBar</code> section</li>
<li><code>button.focusedBorder</code> and <code>button.focusedBorderWidth</code> properties</li>
<li><code>tab.focusedBorder</code> and <code>tab.focusedBorderWidth</code> properties</li>
<li><code>textArea.borderWidth</code>, <code>textArea.border</code>, <code>textArea.focusedBorder</code> and
<code>textArea.errorBorder</code> properties</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3>Changed</h3>
<ul>
<li><p>Overhauled account settings to match the design of other tabbed pages.
The horizontal layout design has been removed due to complicated code and
being impossible to extend without breaking it.</p>
</li>
<li><p>The display name field in account settings is now colored,
preview your new display name's color as you type</p>
</li>
<li><p>For rooms without image avatars set, the room settings's avatar color now
responds to the name field as you type</p>
</li>
<li><p>Overhauled scrollbars:</p>
<ul>
<li>Now match the Mirage theme and much better visibility</li>
<li>No more right margin for the timeline's bar</li>
<li>Minimum height to prevent the bar from becoming impossible to grab</li>
</ul>
</li>
<li><p>Use brighter text for room names of rooms that have unread messages</p>
</li>
<li><p>Buttons, tabs, text fields and areas now have animated bottom borders
to represent keyboard focus instead of being highlighted like when hovered</p>
</li>
<li><p>Text fields and areas can now have rounded corners, following the theme</p>
</li>
<li><p>Tabbed pages (Sign In, Add Chat, etc) can now be swiped left and right</p>
</li>
<li><p>Popups can now be scrolled when their content is bigger than the
window's height</p>
</li>
<li><p>Replace most generic checkmark icons for apply buttons in popups</p>
</li>
<li><p>Pressing escape in forms will consistently trigger corresponding
cancel buttons</p>
</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Fix <code>Connections</code> deprecation warning on Qt 5.15</p>
</li>
<li><p>Skip invisible entries when navigating context menus with up/down arrows</p>
</li>
<li><p>Fix tab focus for unhandled error and invite to room popups</p>
</li>
<li><p>Fix guest access event saying that guest access has been allowed when it
has actually been forbidden</p>
</li>
<li><p>Deselect any selected message before clearing a room's events, not doing so
made the gone messages impossible to deselect.</p>
</li>
<li><p>Properly center some previously offset popups</p>
</li>
</ul>
</release>
<release version="0.5.1" date="2020-06-05">
<h3>Added</h3>
<ul>
<li><p><strong>Saving room settings</strong>: room name, topic, guest access, invite requirement,
guest access and encryption can now be changed and saved from the room's
settings pane</p>
</li>
<li><p><code>markRoomReadMsecDelay</code> setting to configure how long in milliseconds Mirage
will wait before marking a focused room as read, defaults to <code>200</code></p>
</li>
<li><p><code>alertOnMentionForMsec</code> setting separate from <code>alertOnMessageForMsec</code>,
defaulting to <code>-1</code>: will trigger a non-expiring window highlight on
messages received that mention your user
(the behavior differs depending on desktop environment or window manager)</p>
</li>
</ul>
<h3>Changed</h3>
<ul>
<li><p><strong>Unread message/highlight counters</strong>:</p>
<ul>
<li>The counters are now implemented in a cross-client, persistent way,
and respect configured push rules for your account</li>
<li>Read receipts will be sent to the server to mark rooms as read</li>
</ul>
</li>
<li><p>The <code>alertOnMessageForMsec</code> setting now defaults to <code>0</code>, disabling window
highlights for messages not mentioning you</p>
</li>
<li><p>While an E2E key import operation is running, prevent accidentally closing
the popup by clicking outside of it</p>
</li>
<li><p>For manual installations, <code>make install</code> will now copy files to <code>/usr/local</code>
instead of <code>/usr</code> by default.
This can be changed by setting <code>PREFIX</code> when running <code>qmake</code>,
e.g. <code>qmake PREFIX=/usr</code>.
After pulling the latest version, make sure to clean up old installation
and build files before regenerating the Makefile and installing:
<code>sudo make uninstall; make clean; qmake &amp;&amp; make &amp;&amp; sudo make install</code></p>
</li>
<li><p>Improve the error messages shown when trying to start a direct chat with or
invite a non-existing user</p>
</li>
<li><p>In room settings or creation, use a text area for the topic instead of a
field limited to a single line</p>
</li>
</ul>
<h3>Removed</h3>
<ul>
<li>Removed delay when multiple rooms are removed/hidden from the list.
This should provide a smoother experience when filtering rooms or collapsing
accounts, and prevent the account duplication bug.
If you encounter issues with these operations like the room list becoming
invisible, make sure first that your Qt installation is up-to-date
(latest x.y.Z version, e.g. 5.14.2).</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>The room settings pane is now scrollable</p>
</li>
<li><p>Avoid potential error if the room list data model is initialized after an
initial sync has already been completed</p>
</li>
<li><p>Closing the import key popup by pressing escape will now correctly
cancel any running import operation</p>
</li>
<li><p>Fix Python pickling error when trying to re-decrypt events after importing
E2E keys (<a href="https://github.com/mirukana/mirage/issues/50">#50</a>)</p>
</li>
<li><p>Handle Matrix 502 errors returned when trying to start a direct chat or
invite a user with an incorrect or unresponsive server in their ID</p>
</li>
<li><p>Correctly hide <code>socket.gaierror</code> error popups that appear when the
internet connection drops</p>
</li>
<li><p>Hide popups for pointless
<code>ssl.SSLError: [SSL: KRB5_S_INIT] application data after close notify</code>
exceptions that occur in the Flatpak releases due to a Python 3.7 bug</p>
</li>
<li><p>Make sure the account shown in the left pane is immediately updated
after changing display name or avatar in the account settings</p>
</li>
<li><p>When signing in a new account, correctly position it after the other
existing ones without needing a restart</p>
</li>
<li><p>Correctly handle room topics containing new lines, hard tabs or text inside
<code>&lt;&gt;</code> brackets</p>
</li>
<li><p>Starting a direct chat, creating or joining a room will now correctly
update the left pane room list's highlighted item</p>
</li>
<li><p>Fix <code>KeyError</code> when forgetting a room</p>
</li>
<li><p>Fix cursor shape not changing to caret when hovering text fields and areas.
This fix can only apply when the <code>enableKineticScrolling</code> setting is <code>true</code>,
until the project switches to Qt 5.15.</p>
</li>
</ul>
</release>
<release version="0.5.0" date="2020-05-22">
<h3>Added</h3>
<ul>
<li><p><strong>Unread messages and mentions</strong>:</p>
<ul>
<li><p>Rooms in the left pane will now have a counter for unread messages and
times you were mentioned</p>
</li>
<li><p><code>goToPreviousUnreadRoom</code> (default Alt+Shift+U) and
<code>goToNextUnreadRoom</code> (default Alt+U) keybinds to cycle between rooms
with unread messages</p>
</li>
<li><p><code>goToPreviousMentionedRoom</code> (default Alt+Shift+M) and
<code>goToNextMentionedRoom</code> (default Alt+M) keybinds to cycle between rooms
with mentions, or those with unread messages if no rooms with mentions
are left</p>
</li>
<li><p>Room with mentions will be sorted first, then room no mentions but unread
messages, then the rest</p>
</li>
</ul>
</li>
<li><p><strong>Accounts navigation</strong>:</p>
<ul>
<li><p>With two or more accounts, an always visible account thumbnail grid will
be visible in the left pane.<br>
Clicking on an account will make the room list jump to that account.<br>
The accounts will also show a total number of unread messages and
mentions for all the rooms associated with it.</p>
</li>
<li><p><code>goToPreviousAccount</code> (default Alt+Shift+M) and
<code>goToNextAccount</code> (default Alt+M) keybinds to cycle and jump between
accounts in the room list.</p>
</li>
<li><p><code>keys.focusAccountAtIndex</code> in config file, a <code>{"&lt;index&gt;": "&lt;keybind&gt;"}</code>
mapping similar to <code>focusRoomAtIndex</code> which by default binds
Ctrl+1-9 and Ctrl+0 to jump to account 1 to 10 in the room list</p>
</li>
</ul>
</li>
<li><p><strong>Replies</strong>:</p>
<ul>
<li><p>The context menu for messages now has a "Reply" option</p>
</li>
<li><p>The new <code>replyToFocusedOrLastMessage</code> keybind (default Ctrl+Q) can be used
to reply to the focused message if any
(use the <code>focusPreviousMessage</code> and <code>focusNextMessage</code> keybinds),
or to the last message in the timeline not sent by you.</p>
</li>
<li><p>Pressing escape will cancel the reply</p>
</li>
</ul>
</li>
<li><p><strong>Kick and bans</strong>: room members can now be kicked or banned with an optional
reason, using the option in the right pane's member context menu</p>
</li>
<li><p><code>openMessagesLinks</code> keybind (default Ctrl+O).<br>
Will open externally all the URLs present in the selected/focused message(s),
or the last message that contains links if none are selected or focused.</p>
</li>
<li><p><code>clearMemberFilterOnEscape</code> setting.<br>
If <code>true</code> (default),
pressing escape while focusing the "Filter members" field will not only
focus the chat again but also clear the filter.</p>
</li>
<li><p><code>maxMessageCharactersPerLine</code> setting to control the maximum width of
messages. If set to <code>-1</code>, there will be no limit.</p>
</li>
<li><p><code>ownMessagesOnLeftAboveWidth</code> setting, replaces the themes's
<code>eventList.ownEventsOnRightUnderWidth</code> properties.<br>
Can be set to <code>-1</code> to always keep your own messages on the right.</p>
</li>
<li><p><code>enableKineticScrolling</code> setting, try setting it to <code>false</code> if you have
scrolling issues on a trackpad</p>
</li>
<li><p>Support a new <code>enabled</code> key for accounts in the accounts.json config file.
If set to <code>false</code>, Mirage will not login to or show the account on startup.</p>
</li>
<li><p>Support a new <code>order</code> key for accounts in the accounts.json config file
The value is an integer that will determine how accounts in the left pane
are sorted, lower comes first.<br>
If multiple accounts have the same <code>order</code> value, they are sorted by
their user ID.</p>
</li>
<li><p>Themes:</p>
<ul>
<li><code>mainPane.minimumSize</code> property</li>
<li><code>mainPane.accountBar</code> section</li>
<li><code>mainPane.listView.room.unreadIndicator</code> section</li>
<li><code>chat.replyBar</code> section</li>
</ul>
</li>
</ul>
<h3>Changed</h3>
<ul>
<li><p><strong>Performance</strong>:</p>
<ul>
<li><p>Use room members lazy-loading, accounts that have joined
large numbers of rooms will now finally be able to finish their
initial sync.<br>
When the currently shown UI page is a room, the full members list for it
will be loaded.</p>
</li>
<li><p>Request less events for the initial sync, and exclude some types like
membership events to increase initial sync speed</p>
</li>
<li><p>Retrieving profiles for events sent by users no longer present in a room
will no block and delay past events loading.<br>
Missing profiles will be fetched asynchronously when the messages
are currently in view in the UI.</p>
</li>
<li><p>Reduce the number of events that need to be sent between Python and QML
due to changes in list models data</p>
</li>
<li><p>Consecutive syncs will now have a one second delay between them to reduce
both client and server strain</p>
</li>
</ul>
</li>
<li><p>Improved group display name calculations (nio 0.11+ change):<br>
for example, a room that would previously be shown as "Alice and 6 others"
will now be shown as "Alice, Bob, Carol, Dave, Erin and 1 other"
(up to 5 visible names).</p>
</li>
<li><p>Group rooms with more than two users and without an explicitely set avatar
will no longer show their first member's profile picture as avatar</p>
</li>
<li><p>The <code>unfocusOrDeselectAllMessages</code> keybind now defaults to Ctrl+D
instead of Escape, which no longer works as of Qt 5.14.
<code>debugFocusedMessage</code> is changed from Ctrl+D to Ctrl+Shift+D.</p>
</li>
<li><p>Better QML logging format: messages will now be dated, and have a
symbol + color (on Linux and OSX terminals) representing their category</p>
</li>
<li><p>Messages containing code blocks will no longer have their max width limited</p>
</li>
<li><p>Set <code>hideUnknownEvents</code> to <code>true</code> in the default config file</p>
</li>
<li><p>Set a more useful default minimum size for the left pane</p>
</li>
<li><p>The <code>collapseSidePanesUnderWindowWidth</code> setting now defaults to <code>450</code> instead
of <code>400</code>, to account for the larger minimum pane size.</p>
</li>
<li><p>Show a more useful error message with traceback when retrieving an account's
profile or the server config fails on startup</p>
</li>
<li><p>Hide <code>socket.gaierror</code> error popups</p>
</li>
<li><p>When pressing the <code>startPythonDebugger</code> (default Alt+Shift+D) keybind,
use <code>pdb</code> if <code>remote_pdb</code> isn't installed</p>
</li>
<li><p>Themes:</p>
<ul>
<li><code>mainPane.bottomBar</code> properties: <code>background</code> is now by default
<code>transparent</code>, <code>settingsButtonBackground</code> and <code>filterFieldBackground</code> are
now set to <code>colors.strongBackground</code></li>
</ul>
</li>
</ul>
<h3>Removed</h3>
<ul>
<li><p><strong>Performance</strong>:</p>
<ul>
<li><p>After the initial sync, Mirage will no longer try to continually fetch
previous events for rooms where the sync haven't brought any event that is
suitable to be shown as room last event subtitle in the left pane.</p>
</li>
<li><p>Mirage will no longer try to find and autolink display names in incoming
events, which was a very costly operation for rooms with
thousands of members.</p>
</li>
</ul>
</li>
<li><p>The uvloop python module is no longer supported or recommended as an optional
dependency, due to being responsible for some segfaults</p>
</li>
<li><p>The SortFilterProxyModel and RadialBarDemo git submodules are no longer
used. hsluv-c is the only submodule still used currently.</p>
</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p><strong>Performance</strong>:</p>
<ul>
<li><p>Stop rendering and keeping in RAM rooms that aren't currently visible in
the left pane.<br>
This fixes the massive memory usage that occurred with hundreds of rooms
and their avatar images loaded all at once.</p>
</li>
<li><p>Room elements in the left pane will no longer be reloaded every time
a list movement happens (e.g. a room is bumped to the top due to a new
message).<br>
This also lets the movement animation correctly play instead of being
skipped.</p>
</li>
</ul>
</li>
<li><p>Don't show a popup when pressing the redact message keybind if that
message can't be redacted</p>
</li>
<li><p>Stricter mention parsing, fix various cases of text being autolinked when it
shouldn't</p>
</li>
<li><p>Fix exception when parsing <code>&lt;a&gt;</code> HTML tags without <code>href</code> attribute</p>
</li>
<li><p>Fix crash on Python 3.6 due to <code>asyncio.current_task</code></p>
</li>
<li><p>Fix <code>AttributeError</code> when using matrix-nio v0.11+</p>
</li>
<li><p>Fix potential crash on startup due to asyncio event loop and threading</p>
</li>
<li><p>Fix uploads getting rejected by servers due to not passing a file size</p>
</li>
<li><p>Fix extra spacing between "Add chat" and "Expand/Collapse" account buttons</p>
</li>
<li><p>Hide the Binding deprecation warnings in terminal that Qt 5.14+ spams</p>
</li>
<li><p>Fix client not waiting before retrying a failed sync due to server error</p>
</li>
<li><p>Correctly handle server 429 "Too many requests" errors when they come purely
in the form of a HTTP status code without a JSON object giving any info</p>
</li>
<li><p>Fix left rooms remaining at full opacity in the left pane</p>
</li>
<li><p>Fix escape key not working to clear the "Filter rooms" field and focus
the chat again</p>
</li>
<li><p>Fix event mention link detection, and stop trying to autolink event ID
strings in messages as matrix.to URLs also need a room ID to make sense</p>
</li>
</ul>
</release>
<release version="0.4.3" date="2020-04-03">
<h3>Added</h3>
<ul>
<li><p>Support for <code>MIRAGE_CONFIG_DIR</code> and <code>MIRAGE_DATA_DIR</code> environment variables
to change the config and user data folders</p>
</li>
<li><p><code>inviteToRoom</code>, <code>leaveRoom</code> and <code>forgetRoom</code> keybindings
(Alt+I, Alt+Esc and Alt+Shift+Esc by default)</p>
</li>
<li><p><strong>Redactions support</strong>: individual or selected messages can now be
redacted/removed using the option from the message context menu,
or the <code>removeFocusedOrSelectedMessages</code> keybind
(by default Ctrl+R or Alt+Del).</p>
</li>
<li><p>Themes: <code>colors.dimColoredTextSaturation</code> and
<code>colors.dimColoredTextIntensity</code> color properties</p>
</li>
<li><p>Themes: <code>controls.displayName.dimSaturation</code> and
<code>controls.displayName.dimLightness</code> color properties</p>
</li>
<li><p>Themes: <code>chat.message.redactedBody</code> color property</p>
</li>
</ul>
<h3>Changed</h3>
<ul>
<li><code>unfocusOrDeselectAllMessages</code> keybind: now deselect messages first if any
on first press, <em>then</em> cancels the keyboard message focus if possible on
second press </li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Segfault after login on KDE</p>
</li>
<li><p>Buttons not displaying correctly on Qt 5.14</p>
</li>
<li><p>Hard tab characters in theme files not being handled by the theme parser</p>
</li>
<li><p><code>focusRoomAtIndex</code> keybindings: default to Cmd+numbers on OSX instead of
Alt/Option+numbers, which prevented typing special characters on some
keyboard layouts</p>
</li>
<li><p>Needing to press escape twice to close context menus and popups</p>
</li>
<li><p>"Go back to chat" button not doing anything when the room settings pane was
focused in narrow mode</p>
</li>
</ul>
</release>
<release version="0.4.2" date="2020-03-27">
<h3>Added</h3>
<ul>
<li><p>Accounts, rooms, room members and messages can now be long-tapped on touch
screens to open their context menu</p>
</li>
<li><p>New touch screen and keyboard-friendly message selection system, replaces
the previous slow and buggy text selection implementation:</p>
<ul>
<li><p>Tap a message to select or deselect it</p>
</li>
<li><p>Press escape, or use the context menu entry "Deselect all" to deselect
all messages</p>
</li>
<li><p>Tap a first message, then shift+tap another one
(or use "Select until here" from the context menu) to select all messages
from the first to last</p>
</li>
<li><p>With a mouse, a single message can be partially selected and copied</p>
</li>
<li><p>The keyboard can be used to navigate with Ctrl+Up/Down (or Ctrl+J/K),
Ctrl+Space to (de)select, Ctrl+Shift+Space for first-to-last selection,
Ctrl+C for copying the selection, and Escape to focus the composer again
(twice to also deselect messages).
These shortcuts can be changed in the config file.</p>
</li>
</ul>
</li>
<li><p>Themes: <code>chat.message.focusedHighlight</code>,
<code>chat.message.focusedHighlightOpacity</code>, <code>chat.message.checkedBackground</code> and
<code>chat.message.thumbnailCheckedOverlayOpacity</code></p>
</li>
<li><p>Scripts and instructions to build a Flatpak package</p>
</li>
</ul>
<p>The new selection system is still work in progress, dragging to select multiple
messages at once on desktop is not implemented yet.</p>
<h3>Changed</h3>
<ul>
<li>Themes: increased default <code>colors.accentBackground</code> brightness</li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Possible error when handling a room member event that is missing previous
display name or avatar info</p>
</li>
<li><p>Correctly parse <code>mailto:</code> links where the mail address ends with a digit
(e.g. <code>mailto:foo@localhost:8050</code>, or where the host is a single character</p>
</li>
<li><p>Respect case when turning display names into mentions, typing a display name
containing uppercase letters all in lowercase would result in a broken link</p>
</li>
<li><p>Correctly handle <code>0</code> as a value for the <code>alertOnMessageForMsec</code> setting,
this will now prevent urgency hints (window/desktop highlighting or flashing
on new message for most desktops, "ready" notification on Gnome)</p>
</li>
</ul>
</release>
<release version="0.4.1" date="2020-03-23">
<h3>Added</h3>
<ul>
<li><p><code>hideMembershipEvents</code> setting, controls whether events such as
"x joined the room" are shown in the timeline.</p>
</li>
<li><p><code>hideProfileChangeEvents</code> setting, controls whether display name and avatar
change events are shown in the timeline.</p>
</li>
<li><p><code>hideUnknownEvents</code> setting, controls whether events not yet supported by
Mirage (e.g. <code>m.reaction</code>) are shown in the timeline.</p>
</li>
<li><p>Compact mode to make accounts, rooms, messages and room members take only
one line as well as reducing vertical spacing between them.
Set by the new <code>compactMode</code> setting in config file, can also be toggled
with the <code>keys.toggleCompactMode</code> keybind which defaults to Alt+Ctrl+C.</p>
</li>
<li><p><code>keys.focusRoomAtIndex</code> in config file, a <code>{"&lt;index&gt;": "&lt;keybind&gt;"}</code> mapping
which by default binds Alt+1-9 and Alt-0 to focus room 1 to 10
in the current account.</p>
</li>
<li><p>User ID, display names, room ID, room aliases and message ID are now
automatically turned into <a href="https://matrix.to">matrix.to</a> links and will be
rendered as mentions by clients.
In Mirage, user ID/names will be colored with the same color seen when they
send messages.</p>
</li>
<li><p>Track the number of times your user was mentioned in rooms.
The visual counter is not yet displayed, since there currently is no way
to mark messages as read and make the counter go down.</p>
</li>
<li><p>Themes: <code>controls.avatar.compactSize</code> property</p>
</li>
<li>Themes: mention classes styling to <code>chat.message.styleSheet</code></li>
</ul>
<h3>Fixed</h3>
<ul>
<li><p>Python exceptions occurring in the asyncio loop not being printed in
the terminal</p>
</li>
<li><p>Extra newline shown after code blocks in messages</p>
</li>
<li><p>Constant CPU usage due to button loading animations still being rendered
while unneeded and invisible</p>
</li>
</ul>
</release>
<release version="0.4.0" date="2020-03-21">
<p>Initial public release.</p>
</release>

  </releases>
  <custom>
    <value key="Purism::form_factor">workstation</value>
    <value key="Purism::form_factor">mobile</value>
  </custom>
</component>
